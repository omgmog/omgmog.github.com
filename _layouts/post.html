---
layout: layout
---
{% assign post = page %}
{% include interactions/vars.html %}

{% if post.content contains '<code' %}
<link rel="stylesheet" href="{{ "/assets/pygments.css" | absolute_url }}" />
{% endif %}
{% if post.header_background %}
<style>body { background-image: url('{{ post.header_background }}'); }</style>
{% endif %}

<article class="post h-entry">
  <header>
    <h2>
      <a href="{{ post.url }}" class="p-name u-url">
        {{ post.title }}
      </a>
    </h2>
    <div class="post-meta">
      <div class="post-meta-primary">
        {% assign read_time = post.content | number_of_words | divided_by:180 %}
        <time class="dt-published" datetime="{{post.date | date: "%Y-%m-%d"}}">{{ post.date | date:"%B %d %Y" }}</time>
        <span class="bullet">  &bull; </span>
        <span class="read-time">{% if read_time != 0 %}{{ read_time }}{% else %}1{% endif %} min read</span>
      </div>
      <div class="post-meta-secondary">
        {% include interactions/count.html %}
        {% include global/types.html %}
      </div>
    </div>
  </header>
{% assign post_year = post.date | date: "%Y" | plus: 0 %}
{% assign cutoff_year = 2020 | plus: 0 %}
{% assign archive_check = post.archived | default: false %}
{% assign old_difference = cutoff_year | minus: post_year %}

{% if archive_check or old_difference > 0 %}
  <div class="archived-notice">
    This post was published in {{ post_year }} and is kept here for reference. It may contain information that's outdated or inaccurate. All external links and references have been updated to point to archived versions on archive.org where possible.
  </div>
{% endif %}

  <div class="e-content {% if post.archived %}archived{% endif %}">{{ content }}</div>

  {% if post.collection == 'cardboctober' %}
    {% capture cardboctober_footer %}{% include posts/cardboctober.html %}{% endcapture %}{{ cardboctober_footer | markdownify }}
  {% endif %}
  {% include interactions/syndication.html %}
</article>

{% include interactions/templates.html %}
{% include interactions/stream.html %}

<nav class="post-navigation">
  {% if page.previous %}
    <a href="{{ page.previous.url }}" class="prev-post" title="{{ page.previous.title }}">
      <span class="nav-label">← Previous</span>
      <span class="nav-title">{{ page.previous.title }}</span>
    </a>
  {% endif %}
  {% if page.next %}
    <a href="{{ page.next.url }}" class="next-post" title="{{ page.next.title }}">
      <span class="nav-label">Next →</span>
      <span class="nav-title">{{ page.next.title }}</span>
    </a>
  {% endif %}
</nav>

{% if post.content contains '<div data-src' %}
<script>
  const lazy_iframes = document.querySelectorAll('.iframe [data-src]');
  lazy_iframes.forEach(el => {
    el.addEventListener('click', e => {
      const iframe = document.createElement('iframe');
      iframe.width = el.clientWidth;
      iframe.height = el.clientHeight;
      iframe.classList = el.classList;
      iframe.classList.remove('placeholder');
      iframe.src = [el.dataset.src, 'autoplay=1'].join(el.dataset.src.includes('?') ? '&' : '?');
      
      el.replaceWith(iframe); 
    }, false)
  });
</script>
{% endif %}