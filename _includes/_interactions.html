<script>
  {% if jekyll.environment == "production" %}
  const githubIssueID = {% if page.comments_issue %}{{page.comments_issue}}{% else %}null{% endif %};
  const pageURL = "{% if page.old_url %}{{page.old_url | absolute_url}}{% else %}{{page.url | absolute_url }}{% endif %}";
  {% else %}
  const githubIssueID = {% if page.comments_issue %}{{page.comments_issue}}{% else %}null{% endif %};
  const pageURL = "{% if page.old_url %}{{page.old_url | absolute_url}}{% else %}{{page.url | absolute_url }}{% endif %}".replace('http://localhost:4000', 'https://blog.omgmog.net');
  //console.log(pageURL);
  {% endif %}
</script>

<script type="text/template" id="tpl-reply">
  <article class="reply">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" class="avatar" data-username="%author_name%">
    <header>
      <h4><a href="%author_url%" target="_blank" rel="nofollow">%author_name%</a> <a href="%url%" target="_blank" rel="nofollow">%verb% on <time datetime="%date%">%date%</time></a></h4>
    </header>
    <div>%body%</div>
  </article>
</script>
<script type="text/template" id="tpl-like">
  <div class="like">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" title="%verb% by %author_name%" class="avatar" data-username="%author_name%">
  </div>
</script>
<script type="text/template" id="tpl-bookmark">
  %verb% by %author_name% %author_avatar_url% %emoji%
</script>
<script type="text/template" id="tpl-repost">
  %verb% by %author_name% %author_avatar_url% %emoji%
</script>

<script type="text/template" id="tpl-mention">
  <article class="reply mention">
    <div><p>%verb% in <a href="%url%" rel="nofollow" target="_blank">%url%</a></p></div>
  </article>
</script>
<hr>
<div id="instructions" class="notice">
{% assign issue_url = site.github.issues_url | append:page.comments_issue %}
{% capture instructions %}
#### Comments, replies, likes, etc.

{:.comments-open}
You can [comment on this post using Github]({{ issue_url }}). Any replies to the [linked issue]({{ issue_url }}) will appear below this post.

<span class="comments-open">Alternatively, </span>I've sort of hooked up [Webmentions](https://webmention.io), so if you send a Webmention or a [Tweet mentioning the post URL](https://twitter.com/intent/tweet?text={{ page.title }} - {{ site.title }}&url={{ page.url | absolute_url }}&via={{ site.author.twitter }}), it will probably show up below the post<span class="comments-open"> too</span>!
{% endcapture %}
{{ instructions | markdownify }}
</div>
<section id="interactions">
  <div id="comments" style="display:none">
    <h3 class="wide-h3">Comments</h3>
    <div class="items"></div>
  </div>
  <div id="replies" style="display:none">
    <h3 class="wide-h3">Replies</h3>
    <div class="items"></div>
  </div>
  <div id="likes" style="display:none">
    <h3 class="wide-h3">Likes</h3>
    <div class="items likes"></div>
  </div>
  <div id="bookmarks" style="display:none">
    <h3 class="wide-h3">Bookmarks</h3>
    <div class="items"></div>
  </div>
  <div id="reposts" style="display:none">
    <h3 class="wide-h3">Reposts</h3>
    <div class="items"></div>
  </div>
  <div id="mentions" style="display:none">
    <h3 class="wide-h3">Mentions</h3>
    <div class="items"></div>
  </div>
</section>

<link rel="stylesheet" href="{{ '/assets/interactions.css' | absolute_url }}{% if site.github %}?{{site.github.build_revision}}{% endif %}">
<script src="{{ '/assets/marked.min.js' | absolute_url }}"></script>
<script src="{{ '/assets/interactions.js' | absolute_url }}{% if site.github %}?{{site.github.build_revision}}{% endif %}"></script>