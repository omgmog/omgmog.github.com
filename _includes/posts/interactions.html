<script>
  {% if jekyll.environment == "production" %}
  const githubIssueID = {% if page.comments_issue %}{{page.comments_issue}}{% else %}null{% endif %};
  const pageURL = [...new Set(['{{page.url | absolute_url }}'{% if page.alternate_urls %},{% for url in page.alternate_urls %}'{{url | absolute_url}}',{% endfor %}'{{page.url | absolute_url }}'{% endif %}])];
  {% else %}
  const githubIssueID = {% if page.comments_issue %}{{page.comments_issue}}{% else %}null{% endif %};
  const pageURL = [...new Set(['{{page.url | absolute_url }}'{% if page.alternate_urls %},{% for url in page.alternate_urls %}'{{url | absolute_url}}',{% endfor %}'{{page.url | absolute_url }}'{% endif %}].map(url=>url.replace('http://localhost:4000', 'https://blog.omgmog.net')))];
  //console.log(pageURL);
  {% endif %}
</script>

<script type="text/template" id="tpl-reply">
  <article class="reply">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" class="avatar" data-username="%author_name%" loading="lazy">
    <header>
      <h4><a href="%author_url%" target="_blank" rel="nofollow" class="name">%author_name%</a> %verb% <a href="%url%" target="_blank" rel="nofollow">on <time datetime="%date%">%date%</time> via %domain%</a></h4>
    </header>
    <div>%body%</div>
  </article>
</script>
<script type="text/template" id="tpl-like">
  <div class="like">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" title="%verb% by %author_name% on %domain%" class="avatar" data-username="%author_name%" loading="lazy">
  </div>
</script>
<script type="text/template" id="tpl-bookmark">
  <div class="like">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" title="%verb% by %author_name% on %domain%" class="avatar" data-username="%author_name%" loading="lazy">
  </div>
</script>
<script type="text/template" id="tpl-repost">
  <div class="like">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" title="%verb% by %author_name% on %domain%" class="avatar" data-username="%author_name%" loading="lazy">
  </div>
</script>
<script type="text/template" id="tpl-mention">
  <article class="reply mention">
    <div><p>%verb% in <a href="%url%" rel="nofollow" target="_blank">%url%</a> on <time datetime="%date%">%date%</time></p></div>
  </article>
</script>
<script type="text/template" id="tpl-mention-rich">
  <article class="reply mention-rich">
    <img src="%author_avatar_url%" alt="%author_name%'s avatar picture" class="avatar" data-username="%author_name%" loading="lazy">
    <header>
      <h4><a href="%author_url%" target="_blank" rel="nofollow" class="name">%author_name%</a> %verb% <a href="%url%" target="_blank" rel="nofollow">on <time datetime="%date%">%date%</time> via %domain%</a></h4>
    </header>
    <div>%summary%</div>
  </article>
</script>

<section id="interactions">
  <div id="comments" data-display="block">
    <h3 class="wide-h3">Comments</h3>
    <div class="addyours">
      <div class="comments-open">Want to comment? You can do so via <a href="{{ site.github.issues_url | append:page.comments_issue }}">Github</a>.</div> 
      <div class="comments-closed">Comments via Github are currently closed.</div>
    </div>
    <div class="items"></div>
  </div>
  <h3 class="wide-h3">Webmentions<button title="Reload" class="reload" data-what="webmentions"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 80 80" width="20" height="20">
    <path d="M58.385 34.343V21.615L53.77 26.23C50.244 22.694 45.377 20.5 40 20.5c-10.752 0-19.5 8.748-19.5 19.5S29.248 59.5 40 59.5c7.205 0 13.496-3.939 16.871-9.767l-4.326-2.496C50.035 51.571 45.358 54.5 40 54.5c-7.995 0-14.5-6.505-14.5-14.5S32.005 25.5 40 25.5a14.42 14.42 0 0 1 10.239 4.261l-4.583 4.583h12.729z"/>
  </svg></button></h3>
  <div class="addyours">
    {% capture tweet_text %}{{ page.title }} - {{ site.title }}{% endcapture %}
    <p>Want to reply? I've hooked up <a href="https://indieweb.org/Webmention">Webmentions</a> so you can do so by sending a Webmention, or a <a href="https://twitter.com/intent/tweet?text={{ tweet_text | replace:' ','%20'}}&url={{ page.url | absolute_url }}&via=omgmog">Tweet mentioning this post</a>.</p>
    <p>Sent a Webmention but it's not showing up below? It could take a little while for <a href="https://brid.gy">brid.gy</a> to pick it up. Webmentions are cached locally for 30 mins before attempting to fetch new Webmentions.</p>
  </div>
  <div id="replies" data-display="none" style="display:none;">
    <h3>Replies</h3>
    <div class="items"></div>
  </div>
  <div id="mentions" data-display="none" style="display:none">
    <h3>Mentions</h3>
    <div class="items"></div>
  </div>
  <div id="likes" data-display="none" style="display:none">
    <h3>Likes</h3>
    <div class="items likes"></div>
  </div>
  <div id="bookmarks" data-display="none" style="display:none">
    <h3>Bookmarks</h3>
    <div class="items likes"></div>
  </div>
  <div id="reposts" data-display="none" style="display:none">
    <h3>Reposts</h3>
    <div class="items likes"></div>
  </div>
</section>

<link rel="stylesheet" href="{{ '/assets/interactions.css' | absolute_url }}{% if site.github %}?{{site.github.build_revision}}{% endif %}">
<script src="{{ '/assets/marked.min.js' | absolute_url }}"></script>
<script src="{{ '/assets/interactions.js' | absolute_url }}{% if site.github %}?{{site.github.build_revision}}{% endif %}"></script>